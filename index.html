<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>إرسال بيانات إلى Firebase</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts - Inter for a modern look -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f0f4f8; /* Light blue-gray background */
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    #app-container {
      background-color: #ffffff;
      width: 100%;
      max-width: 400px;
      padding: 2rem;
      border-radius: 1.5rem; /* More pronounced rounded corners */
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.2); /* Stronger, modern shadow */
      text-align: center;
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen bg-gray-100">
  <div id="app-container" class="space-y-6">
    <h1 class="text-2xl font-bold text-gray-800">إرسال بيانات يدوية</h1>

    <!-- Input Field -->
    <div>
      <label for="inputValue" class="block text-lg font-medium text-gray-700 mb-2">أدخل القيمة:</label>
      <input type="number" id="inputValue" class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-base text-center" placeholder="أدخل رقمًا هنا">
    </div>

    <!-- Send Button -->
    <button id="sendBtn" class="w-full py-3 px-4 rounded-xl shadow-md text-base font-semibold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 ease-in-out">
      إرسال إلى Firebase
    </button>

    <!-- Status Message -->
    <div id="statusMessage" class="text-sm font-medium mt-4"></div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    // Configuration and Initialization
    // يُرجى استبدال هذه المتغيرات بقيم Firebase الخاصة بك
    const firebaseConfig = JSON.parse(__firebase_config);
    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    
    // UI elements
    const inputValue = document.getElementById('inputValue');
    const sendBtn = document.getElementById('sendBtn');
    const statusMessage = document.getElementById('statusMessage');

    // Reference to the database path
    // سيتم إرسال القيمة إلى المسار /manual_input/value
    const dataRef = db.ref(`artifacts/${appId}/manual_input`);

    // Event listener for the send button
    sendBtn.addEventListener('click', async () => {
      const value = parseFloat(inputValue.value);

      // Simple validation
      if (isNaN(value)) {
        statusMessage.textContent = 'الرجاء إدخال رقم صحيح.';
        statusMessage.className = 'text-sm font-medium mt-4 text-red-600';
        return;
      }
      
      statusMessage.textContent = 'يتم الإرسال...';
      statusMessage.className = 'text-sm font-medium mt-4 text-blue-600';

      try {
        await dataRef.set({
          value: value,
          timestamp: firebase.database.ServerValue.TIMESTAMP
        });
        statusMessage.textContent = 'تم الإرسال بنجاح!';
        statusMessage.className = 'text-sm font-medium mt-4 text-green-600';
        inputValue.value = ''; // Clear the input field
      } catch (error) {
        statusMessage.textContent = `فشل الإرسال: ${error.message}`;
        statusMessage.className = 'text-sm font-medium mt-4 text-red-600';
        console.error("Error sending data to Firebase:", error);
      }
    });
  </script>
</body>
</html>
